class StickersEffect{constructor(e,t,i,s=2500){this.container=e,this.imgArray=t,this.intervalValue=s,this.externalTxt=i,this.currentImgIndex=-1,this.nbClick=0,this.interval=null,this.everClicked=!1}init(){const e=document.querySelectorAll("footer, header"),t=[];for(let i=0;i<e.length;i++){const s=[],r=[];let l=e[i].addEventListener("mouseenter",(()=>{this.everClicked||this.externalTxt.classList.remove("in")}));s.push(l),r.push("mouseenter"),l=e[i].addEventListener("mouseleave",(()=>{this.everClicked||this.externalTxt.classList.add("in")})),s.push(l),r.push("mouseleave"),t.push({el:e[i],listeners:s,types:r})}this.container.addEventListener("click",(e=>{const i=++this.currentImgIndex%this.imgArray.length;if(++this.nbClick-1<this.imgArray.length&&this.imgArray[i]){if(!this.everClicked){this.everClicked=!0,this.externalTxt.classList.add("remove");for(let e of t)for(let t=0;t<e.listeners.length;t++)e.el.removeEventListener(e.types[t],e.listeners[t])}const s=this.imgArray[i].getBoundingClientRect();this.imgArray[i].style.left=e.x-s.width/2+"px",this.imgArray[i].style.top=e.y-s.height/2+"px",this.imgArray[i].style.zIndex=this.nbClick,this.imgArray[i].classList.add("active"),this.runTimer()}else this.resetImgsVisible()})),this.externalTxt.addEventListener("click",(e=>{const i=++this.currentImgIndex%this.imgArray.length;if(++this.nbClick-1<this.imgArray.length&&this.imgArray[i]){if(!this.everClicked){this.everClicked=!0,this.externalTxt.classList.add("remove");for(let e of t)for(let t=0;t<e.listeners.length;t++)e.el.removeEventListener(e.types[t],e.listeners[t])}const s=this.imgArray[i].getBoundingClientRect();this.imgArray[i].style.left=e.x-s.width/2+"px",this.imgArray[i].style.top=e.y-s.height/2+"px",this.imgArray[i].style.zIndex=this.nbClick,this.imgArray[i].classList.add("active"),this.runTimer()}else this.resetImgsVisible()}))}resetImgsVisible(){this.nbClick=0;for(let e of this.imgArray)e.classList.remove("active")}runTimer(){this.interval&&clearInterval(this.interval),this.interval=setInterval((()=>{this.resetImgsVisible(),clearInterval(this.interval),this.interval=null}),this.intervalValue)}}

